<style>
	.loading {
		background-color: rgba(0, 0, 0, 0.71);
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		z-index: 99999;
	}
	.loading-message {
		color: #fff;
		text-align: center;
		margin-top: 20%;
		font-size: 20px;
	}
	.loading-message span {
		margin-left: 12px;
	}

	.spinner {
		animation: rotator 1.4s linear infinite;
	}

	@keyframes rotator {
		0% { transform: rotate(0deg); }
		100% { transform: rotate(270deg); }
	}

	.path {
		stroke-dasharray: 187;
		stroke-dashoffset: 0;
		transform-origin: center;
		animation:
		dash 1.4s ease-in-out infinite,
		colors (1.4s*4) ease-in-out infinite;
	}

	@keyframes colors {
		0% { stroke: #4285F4; }
		25% { stroke: #DE3E35; }
		50% { stroke: #F7C223; }
		75% { stroke: #1B9A59; }
		100% { stroke: #4285F4; }
	}

	@keyframes dash {
		0% { stroke-dashoffset: 187; }
		50% {
			stroke-dashoffset: 187/4;
			transform:rotate(135deg);
		}
		100% {
			stroke-dashoffset: 187;
			transform:rotate(450deg);
		}
</style>
<div id="page_content">
	<div id="page_content_inner"  style="position: relative;">
		<div class="loading" ng-show="vm.loading">
			<div class="loading-message">
				<svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
					<circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
				</svg>
				<span>Đang xu ly bao cao</span>
			</div>
		</div>
		<h3 class="heading_b uk-margin-bottom">{{'PAGE.REPORTS.COURSE_BY_MEMBER.TITLE'
			| translate}}</h3>
		<div class="uk-grid" data-uk-grid-margin>
			<div class="uk-width-medium-1-1">
				<div class="md-card">
					<div class="content-table-gradebook md-card-content" style="position: relative;">
            <div class="loading" ng-show="vm.loading">
              <div class="loading-message">
                <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
                  <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
                </svg>
                <span>Đang tính toán điểm...</span>
              </div>
            </div>
						<div class="uk-margin-bottom">
							<a class="md-btn  md-btn-wave-light md-btn-icon"
								data-uk-modal="{target:'#select_user'}">
								{{'PAGE.REPORTS.COURSE_BY_MEMBER.SELECT_DEPARTMENT'|translate}}
								<i class="material-icons">&#xE313;</i>
							</a>
							<select-user-dialog callback="vm.generateReport"
								dialog-id="'select_user'"></select-user-dialog>
							<export-excel tableid="tableToExportCourseUser" style="margin-left: 10px;"></export-excel>
						</div>
						<div class="uk-overflow-container table-border" id="tableToExportCourseUser">
							<table class="uk-table uk-table-hover uk-table-condensed"
								cellspacing="0" width="100%">
								<thead>
									<tr>
										<th colspan="2" class="uk-text-center">{{'REPORT.COURSE_BY_MEMBER.MEMBER'|translate}}</th>
										<th colspan="3" class="uk-text-center">{{'REPORT.COURSE_BY_MEMBER.COURSE'|translate}}</th>
										<th colspan="6" class="uk-text-center">{{'REPORT.COURSE_BY_MEMBER.STATUS'|translate}}</th>
									</tr>
									<tr>
										<th>#</th>
										<th>{{'MODEL.USER.USERNAME'|translate}}</th>
										<th>{{'MODEL.COURSE.CODE'|translate}}</th>
										<th>{{'MODEL.COURSE.NAME'|translate}}</th>
										<th>{{'MODEL.COURSE.MODEL'|translate}}</th>
										<th>{{'REPORT.COURSE_BY_MEMBER.REGISTER_DATE'|translate}}</th>
										<th>{{'REPORT.COURSE_BY_MEMBER.FIRST_ATTEMPT'|translate}}</th>
										<th>{{'REPORT.COURSE_BY_MEMBER.LAST_ATTEMPT'|translate}}</th>
										<th>{{'MODEL.MEMBER.ENROLL_STATUS'|translate}}</th>
										<th>{{'REPORT.COURSE_BY_MEMBER.SCORE'|translate}}</th>
										<th>{{'REPORT.COURSE_BY_MEMBER.TIME'|translate}}</th>
									</tr>
								</thead>
								<tbody ng-repeat="(key, members) in vm.members" ng-init="parentIndex=$index">
									<tr ng-repeat="member in members">
										<td ng-if="$index == 0" rowspan="{{ vm.members[key].length }}">{{parentIndex + 1}}</td>
										<td ng-if="$index == 0" rowspan="{{ vm.members[key].length }}">{{member.member.username}}</td>
										<td>{{member.course.code}}</td>
										<td>{{member.course.name}}</td>
										<td><span ng-if="member.course.model=='self-paced'">{{'COMMON.COURSE_MODEL.SELF_STUDY'|translate}}</span>
											<span ng-if="member.course.model=='group'">{{'COMMON.COURSE_MODEL.GROUP_STUDY'|translate}}</span>
										</td>
										<td>{{member.registered | date :'dd/MM/yyyy' }}</td>
										<td>{{member.firstAttempt.created | date :'dd/MM/yyyy' }}</td>
										<td>{{member.lastAttempt.created | date :'dd/MM/yyyy' }}</td>
										<td><span ng-if="member.enrollmentStatus=='registered'">{{'COMMON.ENROLL.REGISTERED'|translate}}</span>
											<span ng-if="member.enrollmentStatus=='in-study'">{{'COMMON.ENROLL.INSTUDY'|translate}}</span>
											<span ng-if="member.enrollmentStatus=='completed'">{{'COMMON.ENROLL.COMPLETED'|translate}}</span>
										</td>
										<td>{{member.score}}</td>
										<td>{{member.time | timeString}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

